{% extends "admin/index.html" %}
{% load static %}

{% block extrastyle %}
{{ block.super }}
<style>
    .status-badge {
        padding: 3px 8px;
        border-radius: 3px;
        font-size: 11px;
        font-weight: 500;
    }
    .status-published {
        background: #d4edda;
        color: #155724;
    }
    .status-draft {
        background: #f8d7da;
        color: #721c24;
    }
    .status-review {
        background: #fff3cd;
        color: #856404;
    }
</style>
{% endblock %}

{% block content %}
<div style="margin-bottom: 30px;">
    <h2>Quick Statistics</h2>
    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-top: 20px;">
        <div style="background: #417690; color: white; padding: 20px; border-radius: 8px;">
            <h3 style="margin: 0; font-size: 32px;">{{ stats.total_articles }}</h3>
            <p style="margin: 5px 0 0 0;">Total Articles</p>
        </div>
        <div style="background: #79aec8; color: white; padding: 20px; border-radius: 8px;">
            <h3 style="margin: 0; font-size: 32px;">{{ stats.published_today }}</h3>
            <p style="margin: 5px 0 0 0;">Published Today</p>
        </div>
        <div style="background: #6c757d; color: white; padding: 20px; border-radius: 8px;">
            <h3 style="margin: 0; font-size: 32px;">{{ stats.draft_articles }}</h3>
            <p style="margin: 5px 0 0 0;">Drafts</p>
        </div>
        <div style="background: #28a745; color: white; padding: 20px; border-radius: 8px;">
            <h3 style="margin: 0; font-size: 32px;">{{ stats.published_articles }}</h3>
            <p style="margin: 5px 0 0 0;">Published</p>
        </div>
    </div>
    
    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-top: 20px;">
        <div style="background: #ffc107; color: white; padding: 20px; border-radius: 8px;">
            <h3 style="margin: 0; font-size: 32px;">{{ stats.review_articles }}</h3>
            <p style="margin: 5px 0 0 0;">In Review</p>
        </div>
        <div style="background: #17a2b8; color: white; padding: 20px; border-radius: 8px;">
            <h3 style="margin: 0; font-size: 32px;">{{ stats.total_podcasts }}</h3>
            <p style="margin: 5px 0 0 0;">Podcasts</p>
        </div>
        <div style="background: #dc3545; color: white; padding: 20px; border-radius: 8px;">
            <h3 style="margin: 0; font-size: 32px;">{{ stats.total_videos }}</h3>
            <p style="margin: 5px 0 0 0;">Videos</p>
        </div>
        <div style="background: #6610f2; color: white; padding: 20px; border-radius: 8px;">
            <h3 style="margin: 0; font-size: 32px;">{{ stats.total_editors }}</h3>
            <p style="margin: 5px 0 0 0;">Editors</p>
        </div>
    </div>
</div>

<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px;">
    <div>
        <h2>Recent Articles</h2>
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #f8f9fa;">
                    <th style="padding: 10px; text-align: left;">Title</th>
                    <th style="padding: 10px; text-align: left;">Status</th>
                    <th style="padding: 10px; text-align: left;">Author</th>
                </tr>
            </thead>
            <tbody>
                {% for article in recent_articles %}
                <tr style="border-bottom: 1px solid #dee2e6;">
                    <td style="padding: 10px;">
                        <a href="{% url 'admin:content_article_change' article.id %}">{{ article.title|truncatewords:8 }}</a>
                    </td>
                    <td style="padding: 10px;">
                        <span class="status-badge status-{{ article.status|lower }}">
                            {{ article.get_status_display }}
                        </span>
                    </td>
                    <td style="padding: 10px;">{{ article.author.get_short_name }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" style="padding: 10px; text-align: center;">No articles yet</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    
    <div>
        <h2>Top Viewed (Last 7 Days)</h2>
        <table style="width: 100%; border-collapse: collapse;">
            <thead>
                <tr style="background: #f8f9fa;">
                    <th style="padding: 10px; text-align: left;">Title</th>
                    <th style="padding: 10px; text-align: left;">Views</th>
                    <th style="padding: 10px; text-align: left;">Type</th>
                </tr>
            </thead>
            <tbody>
                {% for article in top_articles %}
                <tr style="border-bottom: 1px solid #dee2e6;">
                    <td style="padding: 10px;">
                        <a href="{% url 'admin:content_article_change' article.id %}">{{ article.title|truncatewords:8 }}</a>
                    </td>
                    <td style="padding: 10px;"><strong>{{ article.view_count }}</strong></td>
                    <td style="padding: 10px;">{{ article.get_content_type_display }}</td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" style="padding: 10px; text-align: center;">No data available</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{{ block.super }}
{% endblock %}
